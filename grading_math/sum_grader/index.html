<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link rel="shortcut icon" href="../../img/favicon.ico">

    <title>SumGrader - MITxGraders</title>

    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/font-hack/2.018/css/hack.min.css">
    <link href='//fonts.googleapis.com/css?family=PT+Sans:400,400italic,700,700italic&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/cinder.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/highlight.css">


    <link href="../../css/extra.css" rel="stylesheet">


    <link href="../../css/cinder_tweaks.css" rel="stylesheet">


    <link href="../../css/readthedocs.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
    <script>
    WebFont.load({
        google: {
            families: ['Open Sans', 'PT Sans']
        }
    });
    </script>

    
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="../..">MITxGraders</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../..">Overview</a>
</li>

                        
                            
<li >
    <a href="../../edx/">edX Syntax</a>
</li>

                        
                            
<li >
    <a href="../../graders/">Introduction to Graders</a>
</li>

                        
                            
<li >
    <a href="../../item_grader/">ItemGrader</a>
</li>

                        
                            
<li >
    <a href="../../string_grader/">StringGrader</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Grading Math <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../formula_grader/">FormulaGrader</a>
</li>

                        
                            
<li >
    <a href="../numerical_grader/">NumericalGrader</a>
</li>

                        
                            
<li >
    <a href="../matrix_grader/matrix_grader/">MatrixGrader</a>
</li>

                        
                            
<li >
    <a href="../sampling/">Sampling Sets</a>
</li>

                        
                            
<li >
    <a href="../functions_and_constants/">Functions and Constants List</a>
</li>

                        
                            
<li >
    <a href="../user_functions/">User-Defined Functions</a>
</li>

                        
                            
<li >
    <a href="../comparer_functions/">Comparer Functions</a>
</li>

                        
                            
<li >
    <a href="../renderer/">AsciiMath Renderer Definitions</a>
</li>

                        
                            
<li >
    <a href="../integral_grader/">IntegralGrader</a>
</li>

                        
                            
<li class="active">
    <a href="./">SumGrader</a>
</li>

                        
                            
<li >
    <a href="../interval_grader/">IntervalGrader</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Grading Lists <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../grading_lists/single_list_grader/">SingleListGrader</a>
</li>

                        
                            
<li >
    <a href="../../grading_lists/list_grader/">ListGrader</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../plugins/">Plugins</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../faq/">FAQs</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../changelog/">Changelog</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fa fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../integral_grader/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../interval_grader/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/mitodl/mitx-grading-library"><i class="fa fa-github"></i> GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#sumgrader">SumGrader</a></li>
            <li class="second-level"><a href="#xml-setup">XML Setup</a></li>
                
            <li class="second-level"><a href="#specifying-the-input-format">Specifying the Input Format</a></li>
                
            <li class="second-level"><a href="#specifying-the-answer">Specifying the Answer</a></li>
                
            <li class="second-level"><a href="#infinite-sums">Infinite Sums</a></li>
                
            <li class="second-level"><a href="#even-and-odd-sums">Even and Odd Sums</a></li>
                
            <li class="second-level"><a href="#other-options">Other Options</a></li>
                
            <li class="second-level"><a href="#option-listing">Option Listing</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="sumgrader">SumGrader<a class="headerlink" href="#sumgrader" title="Permanent link"> # </a></h1>
<p><code>SumGrader</code> is a specialized grading class used to grade the construction of summations. Students can input the limits on the sum, the variable of summation, and the summand (or some subset thereof), and will be graded correct if their construction is numerically equivalent to the instructor's construction. This method of grading allows for arbitrary variable redefinitions.</p>
<p>The grader numerically evaluates the student- and instructor-specified summations by evaluating the sums. Care must be taken to ensure rapid convergence with infinite summations, of which only finitely many terms can be numerically summed.</p>
<h2 id="xml-setup">XML Setup<a class="headerlink" href="#xml-setup" title="Permanent link"> # </a></h2>
<p>We recommend copying the following XML to set up a problem using <code>SumGrader</code>:</p>
<pre class="codehilite"><code class="language-XML">&lt;style&gt;
  .xmodule_display.xmodule_ProblemBlock .problem .capa_inputtype.textline input {
    min-width: 0 !important;
  }
  .xmodule_display.xmodule_ProblemBlock div.problem section div span.MathJax {
    display: inline-block !important;
  }
  .xmodule_display.xmodule_ProblemBlock div.problem section div span.MathJax_Preview {
    display: inline-block !important;
  }
&lt;/style&gt;

&lt;span&gt;
  &lt;customresponse cfn=&quot;grader&quot;&gt;
    &lt;table&gt;
      &lt;col style=&quot;width:10%&quot;/&gt;
      &lt;col style=&quot;width:90%&quot;/&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td colspan=&quot;2&quot;&gt;
            &lt;textline size=&quot;5&quot; correct_answer=&quot;10&quot;/&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;
            &lt;p&gt; \( \displaystyle \huge{ \sum }\)&lt;/p&gt;
          &lt;/td&gt;
          &lt;td&gt;
            &lt;br/&gt;
            &lt;textline inline=&quot;1&quot; size=&quot;10&quot; correct_answer=&quot;n&quot; math=&quot;1&quot; preprocessorClassName=&quot;MJxPrep&quot; preprocessorSrc=&quot;/static/MJxPrep.js&quot;/&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td colspan=&quot;2&quot;&gt;
              &lt;p style=&quot;display: inline;&quot;&gt;[mathjaxinline]n = [/mathjaxinline] &lt;/p&gt;&lt;textline size=&quot;5&quot; correct_answer=&quot;0&quot; inline=&quot;1&quot;/&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/customresponse&gt;
&lt;/span&gt;
</code></pre>

<p>This sets up a summation where students can input the limits of summation and the summand (the variable of summation has been fixed to be <code>n</code> in this case).</p>
<p>Further examples of formatting summations are shown in the example course.</p>
<h2 id="specifying-the-input-format">Specifying the Input Format<a class="headerlink" href="#specifying-the-input-format" title="Permanent link"> # </a></h2>
<p>The grader must be told which input is what, based on the order that the inputs appear in the XML. This is done through the <code>input_positions</code> dictionary. If not specified, it is assumed that the following positions are used:</p>
<pre class="codehilite"><code class="language-python">input_positions = {
    'lower': 1,
    'upper': 2,
    'summand': 3,
    'summation_variable': 4
}
</code></pre>

<p>This requires students to enter all four parameters in the indicated order.</p>
<p>If the author overrides the default <code>input_positions</code> value, any subset of the keys ('lower', 'upper', 'summand', 'summation_variable') may be specified. Key values should be</p>
<ul>
<li>continuous integers starting at 1, or</li>
<li>(default) None, indicating that the parameter is not entered by student</li>
</ul>
<p>For example,</p>
<pre class="codehilite"><code class="language-python">input_positions = {
    'lower': 1,
    'upper': 2,
    'summand': 3
}
</code></pre>

<p>indicates that the problem has 3 input boxes which represent the lower limit, upper limit, and summand in that order. The <code>summation_variable</code> is NOT entered by student and is instead given by the value specified by author in 'answers'.</p>
<p>Here is a sample grader for the above XML:</p>
<pre class="codehilite"><code class="language-pycon">&gt;&gt;&gt; from mitxgraders import *
&gt;&gt;&gt; grader = SumGrader(
...     answers={
...         'lower':'0',
...         'upper':'10',
...         'summand':'n*(n+1)',
...         'summation_variable':'n'
...     },
...     input_positions = {
...         'upper': 1,
...         'summand': 2,
...         'lower': 3
...     }
... )
</code></pre>

<p>Note that when students specify their own variable of summation, it must not conflict with a variable already present in the problem. Note that this means that <code>i</code> and <code>j</code> are not available as variables of summation (as they are used to indicate the imaginary unit).</p>
<h2 id="specifying-the-answer">Specifying the Answer<a class="headerlink" href="#specifying-the-answer" title="Permanent link"> # </a></h2>
<p>The author's answer should be specified as a dictionary with the following keys:</p>
<pre class="codehilite"><code class="language-python">answers = {
    'lower': 'lower_limit',
    'upper': 'upper_limit',
    'summand': 'summand',
    'summation_variable': 'variable_of_summation'
}
</code></pre>

<p>Note that each entry is a string value. <code>SumGrader</code> can handle numerical, complex, vector and even matrix summands. However, it cannot handle numbered variables where the index of the numbered variable is given by the summation variable. This is due to a limitation in the way that numbered variables are sampled.</p>
<p>Unlike integrals, the order of the limits is unimportant.</p>
<h2 id="infinite-sums">Infinite Sums<a class="headerlink" href="#infinite-sums" title="Permanent link"> # </a></h2>
<p><code>SumGrader</code> can handle sums over both finite and infinite ranges. A special constant <code>'infty'</code> is recognized to cater for the infinite case (and takes on the special value <code>float('inf')</code>).</p>
<p>When an infinite range is specified, the grader substitutes <code>infty</code> for a large but finite number. This value can be set using the <code>inft_val</code> option, which defaults to <code>1000</code> (<code>1e3</code>). If the grader detects the presence of the factorial function in the summand, it instead uses the value specified by the <code>infty_val_fact</code>, which defaults to 80. Note that <code>(2*80)! = 160! ~ 10^284</code> is just below the limit of values that can be handled numerically by double precision. This ensures that typical expressions involving factorials will not lead to overflow errors, and also leaves sufficient terms to ensure convergence.</p>
<p>Because infinite sums can be rewritten in a myriad of ways, it is important to ensure that after sufficiently many terms are computed, the summation has converged to within numerical precision. This often means that extra variables must be specified in a small range. E.g., if <code>x</code> is included in the summand as <code>x^n</code>, we recommend setting <code>x</code> in the range <code>[0,0.5]</code> or so. Note that <code>0.5^80 ~ 10^-25</code>, which should be sufficiently small compared to the leading order terms.</p>
<p>To aid in grading infinite sums, the default tolerance on a <code>SumGrader</code> has been set to an absolute value of <code>1e-12</code>. This may be important when the answer provided by the instructor includes twice or half as many terms as the answer provided by the student, even though both sums are equivalent when taken to infinity.</p>
<p>So long as infinite summations converge sufficiently rapidly, <code>SumGrader</code> does a good job at evaluating them. As examples, we have tested that Taylor series expansions for <code>exp</code>, <code>sin</code> and <code>cos</code> converge to numerical precision for small arguments. We advise against using <code>SumGrader</code> for slowly-converging series, such as the typical expansion for <code>tan^-1(1)</code>.</p>
<p>Note that if you are using vectors or matrices in your sums, we strongly suggest that you use a small value for both <code>infty_val</code> and <code>infty_val_fact</code>, probably in the 15-20 range. Otherwise, you may see timeout errors from the python grader on edX.</p>
<h2 id="even-and-odd-sums">Even and Odd Sums<a class="headerlink" href="#even-and-odd-sums" title="Permanent link"> # </a></h2>
<p><code>SumGrader</code> can be told to sum only over even or odd integers through the <code>even_odd</code> option. The default value is 0, which indicates to sum over all integers. Setting it to 1 indicates to sum over odd integers, and 2 indicates to sum over even integers. Instructors must specify this option at construction; students are unable to set this option themselves.</p>
<p>Here is a sample grader that implements the Taylor expansion for sine using odd integers only:</p>
<pre class="codehilite"><code class="language-pycon">&gt;&gt;&gt; from mitxgraders import *
&gt;&gt;&gt; grader = SumGrader(
...     answers={
...         'lower':'1',
...         'upper':'infty',
...         'summand':'(-1)^((n-1)/2)*x^n/fact(n)',
...         'summation_variable':'n'
...     },
...     input_positions={
...         'upper': 1,
...         'summand': 2,
...         'lower': 3
...     },
...     even_odd=1
... )
</code></pre>

<h2 id="other-options">Other Options<a class="headerlink" href="#other-options" title="Permanent link"> # </a></h2>
<p>The following options from <code>FormulaGrader</code> are available for use in <code>SumGrader</code>:</p>
<ul>
<li><code>user_constants</code></li>
<li><code>user_functions</code></li>
<li><code>whitelist</code></li>
<li><code>blacklist</code></li>
<li><code>tolerance</code></li>
<li><code>samples</code> (default: 2)</li>
<li><code>variables</code></li>
<li><code>sample_from</code></li>
<li><code>failable_evals</code></li>
<li><code>numbered_vars</code></li>
<li><code>instructor_vars</code></li>
<li><code>forbidden_strings</code></li>
<li><code>forbidden_message</code></li>
<li><code>required_functions</code></li>
<li><code>metric_suffixes</code></li>
</ul>
<p>Unless otherwise specified, the defaults are the same as in <code>FormulaGrader</code>.</p>
<h2 id="option-listing">Option Listing<a class="headerlink" href="#option-listing" title="Permanent link"> # </a></h2>
<p>Here is the full list of options specific to an <code>SumGrader</code>.</p>
<pre class="codehilite"><code class="language-python">grader = SumGrader(
    input_positions=dict,
    answers=dict,
    even_odd=int,  # default 0
    infty_val=int,  # default 1000
    inftY_val_fact=int,  # default 80
    # The below options are the same as in FormulaGrader
    variables=list,  # default []
    sample_from=dict,  # default {}
    samples=int,  # default 1
    user_functions=dict,  # default {}
    user_constants=dict,  # default {}
    failable_evals=int,  # default 0
    blacklist=list,  # default []
    whitelist=list,  # default []
    tolerance=(float | percentage),  # default 1e-12
    numbered_vars=list,  # default []
    instructor_vars=list,  # default []
    forbidden_strings=list,  # default []
    forbidden_message=str,  # default 'Invalid Input: This particular answer is forbidden'
    required_functions=list,  # default []
    metric_suffixes=bool,  # default False
)
</code></pre></div>
        
    </div>

    <footer class="col-md-12 text-center">
        <hr>
        <p>
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p></small>
    </footer>

    <script src="../../js/jquery-1.10.2.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    <script src="../../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script>
    var base_url = '../..';
    </script>
    <script data-main="../../mkdocs/js/search.js" src="../../mkdocs/js/require.js"></script>
    <script src="../../js/base.js"></script>
    <script src="../../search/require.js"></script>
    <script src="../../search/search.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>

    </body>

</html>
